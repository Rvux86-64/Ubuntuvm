name: Build and Commit Output

on:
  push:
    branches:
      - main # or your default branch name (e.g., master, develop)

jobs:
  build-and-commit:
    runs-on: ubuntu-latest
    permissions:
      contents: write 
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      - name: Install packages
        run: | 
          sudo apt update
          sudo apt install -y build-essential qemu-system-x86_64 x86_64-elf-g++ ovmf gnu-efi make
      - name: Run make on Makefile
        run: |
          make
          make image

      - name: Commit and push changes
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "[Bot] Automated build output commit"
         
